CREATE DATABASE test TEMPLATE = template0 ENCODING = 'UTF8' LC_COLLATE = 'C' LC_CTYPE = 'en_US.utf8';
CREATE DATABASE
\c test
You are now connected to database "test" as user "vagrant".
CREATE EXTENSION ogawayama_fdw;
CREATE EXTENSION
CREATE SERVER ogawayama FOREIGN DATA WRAPPER ogawayama_fdw;
CREATE SERVER
/* DDL */
CREATE TABLE t1(c1 INTEGER NOT NULL PRIMARY KEY) TABLESPACE tsurugi;
ERROR:  Tsurugi could not load data type metadata
CREATE FOREIGN TABLE t1(c1 INTEGER NOT NULL) SERVER ogawayama;
CREATE FOREIGN TABLE
CREATE TABLE t2(c1 INTEGER NOT NULL PRIMARY KEY, c2 BIGINT, c3 DOUBLE PRECISION) TABLESPACE tsurugi;
ERROR:  Tsurugi could not load data type metadata
CREATE FOREIGN TABLE t2(c1 INTEGER NOT NULL, c2 BIGINT, c3 DOUBLE PRECISION) SERVER ogawayama;
CREATE FOREIGN TABLE
/* DML */
SELECT * FROM t1;
ERROR:  Transaction::execute_query() failed. (9)
INSERT INTO t1 VALUES (1);
ERROR:  transaction::execute_statement() failed. (9)
SELECT * FROM t1;
ERROR:  Transaction::execute_query() failed. (9)
SELECT * FROM t2;
ERROR:  Transaction::execute_query() failed. (9)
INSERT INTO t2 VALUES (1, 100, 1.1);
ERROR:  transaction::execute_statement() failed. (9)
INSERT INTO t2 VALUES (2, 200, 2.2);
ERROR:  transaction::execute_statement() failed. (9)
SELECT * FROM t2;
ERROR:  Transaction::execute_query() failed. (9)
SELECT * FROM t1;
ERROR:  Transaction::execute_query() failed. (9)
INSERT INTO t1 VALUES (10);
ERROR:  transaction::execute_statement() failed. (9)
INSERT INTO t1 VALUES (100);
ERROR:  transaction::execute_statement() failed. (9)
SELECT * FROM t1;
ERROR:  Transaction::execute_query() failed. (9)
SELECT * FROM t2;
ERROR:  Transaction::execute_query() failed. (9)
UPDATE t2 SET c2 = c2+10;
ERROR:  transaction::execute_statement() failed. (9)
UPDATE t2 SET c3 = c3+1.1 WHERE c2 = 110;
ERROR:  transaction::execute_statement() failed. (9)
SELECT * FROM t2;
ERROR:  Transaction::execute_query() failed. (9)
SELECT * FROM t1;
ERROR:  Transaction::execute_query() failed. (9)
DELETE FROM t1 WHERE c1 = 10;
ERROR:  transaction::execute_statement() failed. (9)
SELECT * FROM t1;
ERROR:  Transaction::execute_query() failed. (9)
/* Drop tables */
DROP FOREIGN TABLE t1;
DROP FOREIGN TABLE
DROP TABLE t1_dummy;
ERROR:  table "t1_dummy" does not exist
DROP FOREIGN TABLE t2;
DROP FOREIGN TABLE
DROP TABLE t2_dummy;
ERROR:  table "t2_dummy" does not exist
\c postgres
You are now connected to database "postgres" as user "vagrant".
DROP DATABASE test;
DROP DATABASE
