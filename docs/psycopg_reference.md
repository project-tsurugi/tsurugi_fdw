# [Tsurugi FDW for Tsurugi](./README.md)

## リファレンス（Psycopg）

Tsurugi FDWがサポートするPsycopgについて説明します。

### サポート対象プロジェクト

Tsurugi FDWは以下のPsycopgプロジェクトをサポートします。  

- [Psycopg 2 (2.9.11 以降)](https://www.psycopg.org/docs/)
- [Psycopg 3 (3.3.2 以降)](https://www.psycopg.org/psycopg3/docs/)

データアクセス方法については Psycopg の仕様に準じます。  
詳細は各プロジェクトのドキュメントを参照してください。

### 動作確認済クラス一覧

Tsurugiへのデータアクセスで使用する基本的なクラスおよびインターフェースを示します。

#### Psycopg 2

- [モジュールインタフェース](#モジュールインタフェースpsycopg2) - Psycopg2 のグローバルインターフェースを提供
- [Connectionクラス](#connection-クラスpsycopg2) - データベースとの接続を管理
- [Cursorクラス](#cursor-クラスpsycopg2) - SQLコマンドの実行と結果を処理

#### Psycopg 3

- [モジュールインタフェース](#モジュールインタフェースpsycopg3) - Psycopg3 のグローバルインターフェースを提供
- [Connectionクラス](#connection-クラスpsycopg3) - データベースとの接続を管理
- [Cursorクラス](#cursor-クラスpsycopg3) - SQLコマンドの実行と結果を処理

### 動作確認済メソッド一覧

Tsurugiへのデータアクセスで使用する基本的なメソッドを示します。  

表の「動作確認」列は Tsurugiへのアクセス確認における各メソッドの検証状況を示しています。  
実際に動作確認できたメソッドには「〇」、動作すると思われるが実際に動作確認していないメソッドには「－」、Tsurugiの仕様制限により動作しないことが事前に確認できるメソッドには「×」を記入しています。

#### モジュールインタフェース（Psycopg2）

Python Database DB API 2.0 (PEP 249) 仕様で要求される Psycopg2 のモジュールレベルオブジェクト。  

##### 接続関数（Psycopg2）

| 関数名                           | 説明 | 動作確認 |
| :------------------------------- | :--- | :------: |
| `psycopg2.connect(...)`          | データベースへの接続を確立し `Connection` オブジェクトを返す。DSN文字列またはキーワード引数で接続情報を指定する | 〇 |

##### 属性（Psycopg2）

| 属性名                       | 説明 | 動作確認 |
| :--------------------------- | :--- | :------: |
| `psycopg2.apilevel`          | DB-API仕様のバージョン ("2.0") | 〇 |
| `psycopg2.threadsafety`      | ドライバがスレッドセーフティをどのように扱うかを示す整数 (`1`: スレッド間で接続を共有すべきではない) | － |
| `psycopg2.paramstyle`        | SQLクエリ内でパラメータをどのようにプレースホルダとして使うかを示す文字列 (`pyformat` または `format`) | － |
| `psycopg2.__libpq_version__` | このpsycopg2モジュールがコンパイルされた `libpq` ライブラリのバージョン | 〇 |

##### 例外クラス (PEP 249準拠 － Psycopg2）

| クラス名                     | 説明 | 動作確認 |
| :--------------------------- | :--- | :------: |
| `psycopg2.Warning`           | データベースに関する警告のための例外クラス | － |
| `psycopg2.Error`             | データベース操作全般のエラーのための例外クラス | 〇 |
| `psycopg2.InterfaceError`    | データベースインターフェース自体に関するエラーのための例外クラス。`Error` のサブクラス | － |
| `psycopg2.DatabaseError`     | データベース自体に関するエラーのための例外クラス。`Error` のサブクラス | － |
| `psycopg2.DataError`         | データベースで処理中のデータに関する問題。`DatabaseError` のサブクラス | － |
| `psycopg2.OperationalError`  | データベースの動作環境に関するエラー。`DatabaseError` のサブクラス | － |
| `psycopg2.IntegrityError`    | データベースの整合性に関するエラー。`DatabaseError` のサブクラス | － |
| `psycopg2.InternalError`     | データベースの内部エラー。`DatabaseError` のサブクラス | － |
| `psycopg2.ProgrammingError`  | プログラミングエラー。`DatabaseError` のサブクラス | － |
| `psycopg2.NotSupportedError` | ドライバがサポートしない機能を使用しようとした場合のエラー。`DatabaseError` のサブクラス | － |

##### 例外クラス (Psycopg2 拡張機能)

| 属性名                          | 説明 | 動作確認 |
| :------------------------------ | :--- | :------: |
| `psycopg2.Error.pgerror` (属性) | バックエンドから返されたエラーメッセージ | 〇 |
| `psycopg2.Error.pgcode` (属性)  | バックエンドから返されたエラーコード | 〇 |
| `psycopg2.Error.cursor` (属性)  | 例外が発生したカーソルオブジェクト | 〇 |
| `psycopg2.Error.diag` (属性)    | エラーに関する詳細情報を含む `Diagnostics` オブジェクト | － |

##### 型オブジェクト (PEP 249準拠 － Psycopg2）

| オブジェクト名                        | 説明 | 動作確認 |
| :------------------------------------ | :--- | :------: |
| `psycopg2.Date(year, month, day)`     | 日付値を保持するオブジェクト | 〇 |
| `psycopg2.Time(hour, minute, second)` | 時間値を保持するオブジェクト | 〇 |
| `psycopg2.Timestamp(year, month, day, hour, minute, second)` | タイムスタンプ値を保持するオブジェクト | 〇 |
| `psycopg2.DateFromTicks(ticks)`       | ティック値から日付値を保持するオブジェクト | － |
| `psycopg2.TimeFromTicks(ticks)`       | ティック値から時間値を保持するオブジェクト | － |
| `psycopg2.TimestampFromTicks(ticks)`  | ティック値からタイムスタンプ値を保持するオブジェクト | － |
| `psycopg2.Binary(string)`             | バイナリ（長）文字列値を保持するオブジェクト | × |
| `psycopg2.STRING`                     | 文字列ベースの列を記述する型オブジェクト | 〇 |
| `psycopg2.BINARY`                     | バイナリ列を記述する型オブジェクト | × |
| `psycopg2.NUMBER`                     | 数値列を記述する型オブジェクト | － |
| `psycopg2.DATETIME`                   | 日付/時刻列を記述する型オブジェクト | 〇 |
| `psycopg2.ROWID`                      | 「行ID」列を記述する型オブジェクト | － |

#### `Connection` クラス（Psycopg2）

PostgreSQLデータベースへの接続を管理するオブジェクト。トランザクション制御、カーソル作成などを行う。

##### PEP 249準拠 (`Connection` クラス － Psycopg2）

| 名前                     | 説明 | 動作確認 |
| :----------------------- | :--- | :------: |
| `cursor(...)`            | 接続を使用して新しいカーソルオブジェクトを返す | 〇 |
| `commit()`               | 保留中のトランザクションをデータベースにコミットする | 〇 |
| `rollback()`             | 保留中のトランザクションの開始までロールバックする | 〇 |
| `close()`                | 接続を直ちに閉じる | 〇 |

##### Psycopg2 拡張機能 (`Connection` クラス)

| 名前                        | 説明 | 動作確認 |
| :-------------------------- | :--- | :------: |
| `cancel()`                  | 現在のデータベース操作をキャンセルする | － |
| `reset()`                   | 接続をデフォルトにリセットする | － |
| `set_isolation_level(...)`  | 現在のセッションのトランザクション分離レベルを設定する | － |
| `lobject(...)`              | 新しいデータベースラージオブジェクトを `lobject` インスタンスとして返す | × |
| `poll()`                    | 非同期接続試行中、またはカーソルが非同期接続でクエリを実行している場合、ブロックしない場合に通信を進める | － |
| `fileno()`                  | 接続の基盤となるファイルディスクリプタを返す | － |
| `isexecuting()`             | 接続が非同期操作を実行中である場合にTrueを返す | － |
| `get_native_connection()`   | `PyCapsule` オブジェクトにラップされた内部 `PGconn*` を返す | － |
| `get_transaction_status()`  | 現在のセッションのトランザクションステータスを整数として返す | － |
| `get_backend_pid()`         | 接続したバックエンドサーバープロセスのプロセスID (PID) を返す | － |
| `get_parameter_status(...)` | サーバーの現在のパラメータ設定を検索する | － |
| `get_dsn_parameters()`      | 接続の有効なdsnパラメータを辞書として取得する | － |
| `xid(...)`                  | この接続の `tpc_*()` メソッドに渡す `Xid` インスタンスを返す | × |
| `tpc_begin(...)`            | 指定されたトランザクションID `xid` でTPCトランザクションを開始する | × |
| `tpc_prepare()`             | `tpc_begin()` で開始されたトランザクションの最初のフェーズを実行する | × |
| `tpc_commit(...)`           | 準備されたTPCトランザクションをコミットする | × |
| `tpc_rollback(...)`         | 準備されたTPCトランザクションをロールバックする | × |
| `tpc_recover()`             | 保留中のトランザクションを表す `Xid` のリストを返す | × |
| `closed` (属性)             | 接続が開いている場合は0、閉じているか破損している場合はゼロ以外の値を返す読み取り専用の整数属性 | 〇 |
| `dsn` (属性)                | 接続によって使用された接続文字列を含む読み取り専用文字列 | 〇 |
| `autocommit` (属性)         | Trueの場合すべてのステートメントが即座に影響を及ぼす。Falseの場合最初のコマンド実行で新しいトランザクションが開始される | 〇 |
| `isolation_level` (属性)    | 現在のセッションのトランザクション分離レベルを返したり設定したりする | × |
| `readonly` (属性)           | 現在のセッションの読み取り専用ステータスを返したり設定したりする | － |
| `deferrable` (属性)         | 現在のセッションのdeferrableステータスを返したり設定したりする | － |
| `encoding` (属性)           | クライアントエンコーディングを読み取ったり設定したりする | － |
| `notices` (属性)            | セッション中にクライアントに送信されたすべてのデータベースメッセージを含むリスト | － |
| `notifies` (属性)           | セッションによって受信された非同期通知を含む `Notify` オブジェクトのリスト | － |
| `cursor_factory` (属性)     | `cursor()` メソッドでパラメータが指定されていない場合に使用されるデフォルトのカーソルファクトリ | － |
| `info` (属性)               | ネイティブの `libpq` 接続に関する情報を公開する `ConnectionInfo` オブジェクト | － |
| `status` (属性)             | 接続のステータスを表す読み取り専用の整数 | － |
| `async` (属性)              | 接続が非同期である場合は1、それ以外の場合は0を返す読み取り専用属性 | － |
| `async_` (属性)             | `async` のエイリアス。Pythonのバージョンで `async` がキーワードである場合に利用可能 | － |
| `pgconn_ptr` (属性)         | 内部の `PGconn*` を整数として返す | － |
| `protocol_version` (属性)   | 使用されているフロントエンド/バックエンドプロトコルを表す読み取り専用の整数 | － |
| `server_version` (属性)     | バックエンドバージョンを表す読み取り専用の整数 | － |
| `__enter__()` / `__exit__()` (特殊メソッド) | コンテキストマネージャとして使用し、`with` ブロックの終了時にコミットまたはロールバックを自動的に行う | － |

#### `Cursor` クラス（Psycopg2）

SQLコマンドの実行と結果を処理するためのオブジェクト。SQLクエリの実行、フェッチなどを行う。

##### PEP 249準拠 (`Cursor` クラス － Psycopg2）

| 名前                     | 説明 | 動作確認 |
| :----------------------- | :--- | :------: |
| `close()`                | カーソルを閉じる。カーソルはそれ以降使用できない | 〇 |
| `execute(...)`           | データベース操作（クエリまたはコマンド）を実行する | 〇 |
| `executemany(...)`       | すべてのパラメータのタプルまたはマッピングのシーケンスに対して、データベース操作（クエリまたはコマンド）を実行する | 〇 |
| `callproc(...)`          | 指定された名前で保存されているデータベースプロシージャを呼び出す | × |
| `setinputsizes(...)`     | DB API 2.0に準拠して公開されているメソッド。現在は何もしない | － |
| `fetchone()`             | クエリ結果セットの次の行を取得し、単一のタプルとして返す | 〇 |
| `fetchmany(...)`         | クエリ結果の次の行のセットを取得し、タプルのリストとして返す | 〇 |
| `fetchall()`             | クエリ結果の残りの全ての行を取得し、タプルのリストとして返す | 〇 |
| `setoutputsize(...)`     | DB API 2.0に準拠して公開されているメソッド。現在は何もしない | － |
| `description` (属性)     | クエリ結果の記述 | 〇 |
| `arraysize` (属性)       | `fetchmany()` で一度にフェッチする行数を指定する読み書き可能な属性 | 〇 |
| `rowcount` (属性)        | 最後の `execute*()` が生成した行数または影響を与えた行数を指定する読み取り専用属性 | 〇 |
| `rownumber` (属性)       | 結果セット内のカーソルの現在の0ベースのインデックス、またはインデックスが決定できない場合はNoneを提供する読み取り専用属性 | － |
| `lastrowid` (属性)       | カーソルによって挿入された最後の行のOIDを提供する読み取り専用属性 | － |

##### Psycopg2 拡張機能 (`Cursor` クラス)

| 名前                     | 説明 | 動作確認 |
| :----------------------- | :--- | :------: |
| `mogrify(...)`           | 引数バインディング後のクエリ文字列を返す | － |
| `scroll(...)`            | `mode` に応じて結果セット内のカーソルを新しい位置にスクロールする | 〇 |
| `cast(...)`              | PostgreSQLの文字列表現からPythonオブジェクトに値を変換する | － |
| `nextset()`              | PostgreSQLではこのメソッドはサポートされておらず、`NotSupportedError` 例外を発生させる | － |
| `copy_from(...)`         | `COPY FROM STDIN` コマンドを使用して、ファイルライクオブジェクトからデータをテーブルに読み込む | × |
| `copy_to(...)`           | `COPY TO STDOUT` コマンドを使用して、テーブルの内容をファイルライクオブジェクトに書き込む | × |
| `copy_expert(...)`       | ユーザーが作成した `COPY` ステートメントを送信する | × |
| `closed` (属性)          | カーソルが閉じているかどうか（True）または閉じられていないか（False）を指定する読み取り専用ブール属性 | 〇 |
| `connection` (属性)      | カーソルが作成された接続オブジェクトへの参照を返す読み取り専用属性 | 〇 |
| `name` (属性)            | `connection.cursor()` によって名前付きカーソルとして作成された場合、カーソルの名前を含む読み取り専用属性 | － |
| `scrollable` (属性)      | 名前付きカーソルが `SCROLL` として宣言されているかどうかを指定する読み書き可能な属性 | － |
| `withhold` (属性)        | 名前付きカーソルの存続期間が現在のトランザクションの外部に及ぶべきかどうかを指定する読み書き可能な属性 | － |
| `itersize` (属性)        | 名前付きカーソルをイテレートする際に、各ネットワークラウンドトリップでバックエンドからフェッチする行数を指定する読み書き可能な属性 | － |
| `query` (属性)           | バックエンドに送信された最後のクエリの本体（バウンド引数を含む）をバイト文字列として含む読み取り専用属性 | － |
| `statusmessage` (属性)   | 最後のコマンドによって返されたメッセージを含む読み取り専用属性 | － |
| `tzinfo_factory` (属性)  | `TIMESTAMP WITH TIME ZONE` などのデータ型を処理するために使用されるタイムゾーンファクトリ | － |
| `pgresult_ptr` (属性)    | カーソルの内部 `PGresult*` を整数として返す | － |
| `__iter__()` (特殊メソッド) | カーソルをイテレータとして使用し、結果セットのレコードをループ処理する | － |

---

#### モジュールインタフェース（Psycopg3）

Python Database DB API 2.0 (PEP 249) 仕様で要求される Psycopg3 のモジュールレベルオブジェクト。  

##### 接続関数（Psycopg3）

| メソッド名              | 説明 | 動作確認 |
| :---------------------- | :--- | :------: |
| `psycopg.connect(...)`  | データベースへの接続を確立し `Connection` オブジェクトを返す。`Connection.connect` のエイリアス | 〇 |

##### 属性（Psycopg3）

| 属性名                       | 説明 | 動作確認 |
| :--------------------------- | :--- | :------: |
| `psycopg.capabilities`       | `libpq` が特定の機能を実装しているかを確認するためのオブジェクト (`Capabilities` クラスのインスタンス) | － |
| `psycopg.adapters`           | Python型とPostgreSQL型の変換方法を定義するデフォルトのアダプターマップ。 (`AdaptersMap` クラスのインスタンス) | － |

##### 例外クラス (PEP 249準拠 － Psycopg3）

| クラス名                     | 説明 | 動作確認 |
| :--------------------------- | :--- | :------: |
| `psycopg.Warning`            | データベースに関する警告のための例外クラス | － |
| `psycopg.Error`              | データベース操作全般のエラーのための例外クラス | 〇 |
| `psycopg.InterfaceError`     | データベースインターフェース自体に関するエラーのための例外クラス。`Error` のサブクラス | － |
| `psycopg.DatabaseError`      | データベース自体に関するエラーのための例外クラス。`Error` のサブクラス | － |
| `psycopg.DataError`          | データベースで処理中のデータに関する問題。`DatabaseError` のサブクラス | － |
| `psycopg.OperationalError`   | データベースの動作環境に関するエラー。`DatabaseError` のサブクラス | － |
| `psycopg.IntegrityError`     | データベースの整合性に関するエラー。`DatabaseError` のサブクラス | － |
| `psycopg.InternalError`      | データベースの内部エラー。`DatabaseError` のサブクラス | － |
| `psycopg.ProgrammingError`   | プログラミングエラー。`DatabaseError` のサブクラス | － |
| `psycopg.NotSupportedError`  | ドライバがサポートしない機能を使用しようとした場合のエラー。`DatabaseError` のサブクラス | － |

##### 例外クラス (Psycopg3 拡張機能)

| 属性名                          | 説明 | 動作確認 |
| :------------------------------ | :--- | :------: |
| `psycopg.Error.diag` (属性)     | エラーに関する詳細情報を含む `Diagnostics` オブジェクト | － |
| `psycopg.Error.sqlstate` (属性) | サーバーからエラーが受信された場合のエラーコード | 〇 |
| `psycopg.Error.pgconn` (属性)   | エラーが接続試行から発生した場合の接続オブジェクト | 〇 |
| `psycopg.Error.pgresult` (属性) | エラーが失敗したクエリの後に発生した場合の結果オブジェクト | 〇 |

##### 型オブジェクト (Psycopg3）

> [!NOTE]
> `Psycopg3` は、Python のデータ型を最大限に活用し、より汎用的でカスタマイズ可能なデータ適応システム (`psycopg.adapt` と `psycopg.types`が中心) を通じて型変換を扱っています。  
> これは、`Psycopg3` が `Psycopg2` からの変更点として、より柔軟で強力な「データ適応システム (Data Adaptation System)」 を導入しているためです。  

### `Connection` クラス（Psycopg3）

PostgreSQLデータベースへの接続を表す（同期）オブジェクト。トランザクションの管理、カーソルの作成などを行う。

#### PEP 249準拠 (`Connection` クラス － Psycopg3）

| メソッド名         | 説明 | 動作確認 |
| :----------------- | :--- | :------: |
| `close()`          | データベース接続を閉じる | 〇 |
| `commit()`         | 保留中のトランザクションをデータベースにコミットする | 〇 |
| `rollback()`       | 保留中のトランザクションの開始点までロールバックする | 〇 |
| `cursor(...)`      | 新しいカーソルオブジェクトを返す | 〇 |

#### Psycopg3 拡張機能 (`Connection` クラス)

| 名前                            | 説明 | 動作確認 |
| :------------------------------ | :--- | :------: |
| `connect(...)` (クラスメソッド) | データベースサーバーに接続し、新しい `Connection` インスタンスを返す。`psycopg.connect()` のエイリアス | － |
| `execute(...)`                  | クエリを実行し、結果を読み取るカーソルを返す | － |
| `pipeline()`                    | 接続をパイプラインモードに切り替えるコンテキストマネージャ。`with conn.pipeline() as p:` のように使用する | － |
| `transaction(...)`              | 新しいトランザクションまたはネストされたトランザクションでコンテキストブロックを開始する | － |
| `set_autocommit(...)`           | `autocommit` セッターのメソッドバージョン | － |
| `set_isolation_level(...)`      | `isolation_level` セッターのメソッドバージョン | － |
| `set_read_only(...)`            | `read_only` セッターのメソッドバージョン | － |
| `set_deferrable(...)`           | `deferrable` セッターのメソッドバージョン | － |
| `cancel_safe(...)`              | 接続上の現在の操作をキャンセルする | － |
| `cancel()`                      | 接続上の現在の操作をキャンセルする。シグナルハンドラとして呼び出す場合にのみ推奨される | － |
| `notifies(...)`                 | データベースから通知を受信すると `Notify` オブジェクトを生成する | × |
| `add_notify_handler(...)`       | 通知を受信したときに呼び出される callable を登録する | × |
| `remove_notify_handler(...)`    | 以前に登録された通知 callable を登録解除する | × |
| `add_notice_handler(...)`       | 通知メッセージを受信したときに呼び出される callable を登録する | × |
| `remove_notice_handler(...)`    | 以前に登録された通知メッセージ callable を登録解除する | × |
| `fileno()`                      | 接続のファイルディスクリプタを返す | － |
| `xid(...)`                      | Two-phase commitで使用する `Xid` インスタンスを返す | × |
| `tpc_begin(...)`                | 指定されたトランザクションID `xid` でTwo-phase commitトランザクションを開始する | × |
| `tpc_prepare()`                 | `tpc_begin()` で開始されたトランザクションのTwo-phase commitの最初のフェーズを実行する | × |
| `tpc_commit(...)`               | 準備されたTwo-phase commitトランザクションをコミットする | × |
| `tpc_rollback(...)`             | 準備されたTwo-phase commitトランザクションをロールバックする | × |
| `tpc_recover()`                 | 準備状態のトランザクションのリスト (`Xid` オブジェクト) を返す | × |
| `prepare(...)`                  | クエリを準備し、`PreparedStatement` オブジェクトを返す | － |
| `prepared_statement(...)`       | 準備済みステートメントのコンテキストマネージャ | － |
| `adapters` (属性)               | このカーソルで実行されるクエリのPythonパラメータとPostgreSQL結果を変換するために使用されるアダプター構成 | 〇 |
| `closed` (属性)                 | 接続が閉じている場合にTrue | 〇 |
| `broken` (属性)                 | 接続が中断された場合にTrue | － |
| `cursor_factory` (属性)         | `cursor()` および `execute()` によって返される型、またはファクトリ関数。デフォルトは `psycopg.Cursor` | － |
| `server_cursor_factory` (属性)  | `name` が指定された場合に `cursor()` によって返される型、またはファクトリ関数。デフォルトは `psycopg.ServerCursor` | － |
| `row_factory` (属性)            | `fetchone()` およびその他のカーソルフェッチメソッドによって返される行のタイプを定義する行ファクトリ。デフォルトは `tuple_row` | － |
| `autocommit` (属性)             | 接続の自動コミット状態。同期接続では書き込み可能、非同期接続では読み取り専用 | 〇 |
| `isolation_level` (属性)        | 新しいトランザクションの分離レベル | － |
| `read_only` (属性)              | 新しいトランザクションの読み取り専用状態 | － |
| `deferrable` (属性)             | 新しいトランザクションのdeferrable状態 | － |
| `pgconn` (属性)                 | 接続を構成する `libpq` 接続ラッパー | － |
| `info` (属性)                   | 接続プロパティを検査するための `ConnectionInfo` 属性 | － |
| `prepare_threshold` (属性)      | クエリが準備されるまでに実行される回数。デフォルトは5 | － |
| `prepared_max` (属性)           | 接続上の準備済みステートメントの最大数。デフォルトは100 | － |

### `Cursor` クラス（Psycopg3）

SQLコマンドの実行と結果を処理するための（同期）オブジェクト。SQLクエリの実行、フェッチなどを行う。

#### PEP 249準拠 (`Cursor` クラス － Psycopg3）

| 名前                 | 説明 | 動作確認 |
| :------------------- | :--- | :------: |
| `execute(...)`       | SQLステートメントを実行する | 〇 |
| `executemany(...)`   | 複数のパラメータセットに対して同じSQLステートメントを複数回実行する | 〇 |
| `fetchone()`         | 次の1行を取得する | 〇 |
| `fetchmany(...)`     | 指定された数の行を取得する | 〇 |
| `fetchall()`         | 残りのすべての行を取得する | 〇 |
| `close()`            | カーソルを閉じる | 〇 |
| `setinputsizes(...)` | （オプション）次の実行されるSQLの入力パラメータのサイズを事前に定義する | － |
| `setoutputsize(...)` | （オプション）特定のカラムの出力サイズを事前に定義する | － |
| `callproc(...)`      | ストアドプロシージャを実行する | × |
| `rowcount` (属性)    | 影響を受けた行の数、または返された行の数 | 〇 |
| `description` (属性) | 最後のクエリ結果の列のメタデータを記述するタプルのシーケンス | 〇 |
| `arraysize` (属性)   | `fetchmany()` のデフォルトサイズ | 〇 |

#### Psycopg3 拡張機能 (`Cursor` クラス)

| 名前                   | 説明 | 動作確認 |
| :--------------------- | :--- | :------: |
| `copy(...)`            | `COPY` 操作を開始し、それを管理するためのオブジェクトを返す | × |
| `stream(...)`          | データベースからの結果を1行ずつイテレートする | － |
| `nextset()`            | `executemany()` によって実行された次のクエリの結果セットに移動する | － |
| `results()`            | カーソルによって受信された複数のレコードセットをイテレートする | － |
| `set_result(...)`      | 特定の結果セットに移動する | － |
| `scroll(...)`          | 結果セット内のカーソルを新しい位置に移動する | 〇 |
| `mogrify(...)`         | クエリを準備しますが実行せず、バインドされた引数を含む文字列を返す | － |
| `connection` (属性)    | このカーソルが使用している接続 |  〇 |
| `adapters` (属性)      | PythonパラメータとPostgreSQL結果を変換するために使用されるアダプター設定 |  〇 |
| `closed` (属性)        | カーソルが閉じている場合にTrue | 〇 |
| `format` (属性)        | クエリによって返されるデータの形式 (`pq.Format` 列挙型) | － |
| `row_factory` (属性)   | 結果行の形成方法を制御する書き込み可能な属性 | － |
| `pgresult` (属性)      | 現在の結果セットの表現（低レベルの `PGresult` オブジェクト） | － |
| `statusmessage` (属性) | 現在の結果セットのステータスタグ | － |
| `rownumber` (属性)     | 現在の結果セットでフェッチする次の行のインデックス | － |
| `_query` (属性)        | クエリとパラメータを変換するために使用されるヘルパーオブジェクト | － |
| `ntuples` (属性)       | 結果セットの行数 | － |
| `nfields` (属性)       | 結果セットの列数 | － |
| `ClientCursor(...)` (クラス) | クライアント側バインディングカーソル | － |
| `ServerCursor(...)` (クラス) | サーバーサイドカーソル | － |
| `RawCursor(...)` (クラス) | PostgreSQL形式 ($1, $2…) のプレースホルダをサポートする | － |
| `RawServerCursor(...)` (クラス) | PostgreSQL形式 ($1, $2…) のプレースホルダをサポートする | － |
